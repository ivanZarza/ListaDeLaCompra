import{_ as g,b as c,o as h,c as U,a as e,w as _,v,e as w,p as T,d as b,f,F as V}from"./index-Du6GS4nX.js";import{V as y}from"./VentanaToast-Bwk1dkzL.js";const p=u=>(T("data-v-64d505d4"),u=u(),b(),u),C={class:"total"},S={class:"contenedor1"},D=p(()=>e("div",{class:"rotulo"},[e("h1",null,"Crear usuario")],-1)),E={class:"form"},I={class:"nombre"},R=p(()=>e("label",{for:"nombre"},"Nombre",-1)),x={class:"apellidos"},j=p(()=>e("label",{for:"apellidos"},"Apellidos",-1)),k={class:"contraseña"},A=p(()=>e("label",{for:"contraseña"},"Contraseña",-1)),B={class:"contraseña2"},L=p(()=>e("label",{for:"contraseña2"},"Confirmar contraseña",-1)),N={__name:"CrearUsuario",emits:["crearUsuario"],setup(u,{emit:t}){const i=t,r=c(""),o=c(""),a=c(""),n=c("");function d(){i("crearUsuario",{nombre:r.value,apellidos:o.value,contraseña:a.value,contraseña2:n.value}),console.log("Datos enviados",r.value,o.value,a.value,n.value)}return(m,s)=>(h(),U("div",C,[e("div",S,[D,e("div",E,[e("form",null,[e("div",I,[R,_(e("input",{type:"text",id:"nombre","onUpdate:modelValue":s[0]||(s[0]=l=>r.value=l)},null,512),[[v,r.value]])]),e("div",x,[j,_(e("input",{type:"text",id:"apellidos","onUpdate:modelValue":s[1]||(s[1]=l=>o.value=l)},null,512),[[v,o.value]])]),e("div",k,[A,_(e("input",{type:"password",id:"contraseña","onUpdate:modelValue":s[2]||(s[2]=l=>a.value=l)},null,512),[[v,a.value]])]),e("div",B,[L,_(e("input",{type:"password",id:"contraseña2","onUpdate:modelValue":s[3]||(s[3]=l=>n.value=l)},null,512),[[v,n.value]])]),e("button",{onClick:w(d,["prevent"])},"Crear")])])])]))}},O=g(N,[["__scopeId","data-v-64d505d4"]]),P={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://api-tucompra.izarza.dev"},{VITE_API_URL:M}=P;class z{constructor(){this.registros=c([])}async registrarUsuario({nombre:t,apellidos:i,contraseña:r}){try{const o=await fetch(`${M}/api/listadelacompra/registro`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:t,apellidos:i,contraseña:r})});if(!o.ok){const a=await o.json();throw new Error(a.error||"Error al registrar usuario: "+o.status)}if(o.ok){const a=await o.json();this.registros.value.push(a)}}catch(o){throw o}}}const F=new z,q={__name:"RegistroUsuarioView",setup(u){const t=c(""),i=c(!1);async function r({nombre:a,apellidos:n,contraseña:d,contraseña2:m}){if(d!==m||!a||!n||!d||!m){t.value="Las contraseñas no coinciden, o faltan datos",o();return}try{await F.registrarUsuario({nombre:a,apellidos:n,contraseña:d}),t.value="Usuario registrado correctamente",o()}catch(s){console.error(s),t.value=s.message,o()}}function o(){i.value=!0,setTimeout(()=>{i.value=!1},2e3)}return(a,n)=>(h(),U(V,null,[f(O,{onCrearUsuario:r}),f(y,{mensajeToast:t.value,verToast:i.value},null,8,["mensajeToast","verToast"])],64))}};export{q as default};
